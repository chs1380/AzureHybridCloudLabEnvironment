- name: Install PollingLoginSshWorkerService
  hosts: windows
  gather_facts: no
  tasks:
    - name: Copy Packages
      win_copy:
        src: /mnt/c/Users/developer/source/repos/wongcyrus/PollingLoginSshServices/PollingLoginSshWorkerService/bin/Debug/net6.0/win-x64/
        dest: c:\PollingLoginSshWorkerService\
    - name: Create a new service PollingLoginSshWorkerService
      win_service:
        name: PollingLoginSshWorkerService
        path: c:\PollingLoginSshWorkerService\PollingLoginSshWorkerService.exe
        display_name: PollingLoginSshWorkerService
        description: Polling Login Ssh Worker Service
        start_mode: auto
        state: restarted
    - name: Check PollingLoginSshWorkerService is installed
      win_service:
        name: PollingLoginSshWorkerService
      register: service_info
    - debug: msg="{{ inventory_hostname }} => {{ service_info.state }}"
               
 